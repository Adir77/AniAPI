var video,timeElapsed,duration,progressBar,seek,seekTooltip,volumeButton,volumeIcons,volumeMute,volumeLow,volumeMiddle,volumeHigh,volume,playbackAnimation,videoContainer,pipButton,fullScreenButton,videoControls,playbackControls,fullscreenIcons;window.VideoPlayer={InitVideoVariables:function(){video||(videoContainer=document.querySelectorAll(".video-container")[0],video=document.querySelectorAll(".video")[0],duration=document.getElementById("duration"),videoControls=document.querySelectorAll(".video-controls")[0],playbackControls=document.querySelectorAll(".playback-animation")[0],fullscreenIcons=document.querySelectorAll(".fullscreen-button i"),playIcons=document.querySelectorAll(".play i"),timeElapsed=document.getElementById("time-elapsed"),progressBar=document.querySelectorAll(".progress-bar")[0],seek=document.querySelectorAll(".seek")[0],seekTooltip=document.querySelectorAll(".seek-tooltip")[0],volumeButton=document.getElementById("volume-button"),volumeIcons=document.querySelectorAll(".volume-button i"),volumeMute=document.querySelectorAll(".fa-volume-mute")[0],volumeLow=document.querySelectorAll(".fa-volume-down")[0],volumeMiddle=document.querySelectorAll(".fa-volume")[0],volumeHigh=document.querySelectorAll(".fa-volume-up")[0],volume=document.querySelectorAll(".volume")[0],pipButton=document.querySelectorAll(".pip-button")[0],fullScreenButton=document.querySelectorAll(".fullscreen-button")[0],video.addEventListener("timeupdate",VideoPlayer.UpdateProgress),seek.addEventListener("mousemove",VideoPlayer.updateSeekTooltip),volume.addEventListener("input",VideoPlayer.UpdateVolume),volumeButton.addEventListener("click",VideoPlayer.ToggleMute),pipButton.addEventListener("click",VideoPlayer.TogglePip),seek.addEventListener("click",VideoPlayer.SkipAhead),video.addEventListener("loadedmetadata",VideoPlayer.VideoLoaded))},VideoLoaded:function(){const n=Math.round(video.duration);if(!isNaN(n)){seek.setAttribute("max",n);progressBar.setAttribute("max",n);const i=new Date(n*1e3).toISOString().substr(11,8),t={minutes:i.substr(3,2),seconds:i.substr(6,2)};duration.innerText=`${t.minutes}:${t.seconds}`;duration.setAttribute("datetime",`${t.minutes}m ${t.seconds}s`);document.querySelectorAll(".play .fa-play").forEach(n=>n.classList.remove("hidden"));document.querySelectorAll(".play .fa-pause").forEach(n=>n.classList.add("hidden"))}},ChangeVideoUrl:async function(n){video.url!=n&&(video.url=n,await video.load(),VideoPlayer.VideoLoaded())},ShowVideoControls:function(){videoControls.classList.remove("hide");playbackControls.classList.remove("hide")},HideVideoControls:function(){videoControls.classList.add("hide");playbackControls.classList.add("hide")},TogglePlay:function(){video.paused?(video.play(),setTimeout(VideoPlayer.HideVideoControls,1e3)):(video.pause(),VideoPlayer.ShowVideoControls());playIcons.forEach(n=>n.classList.toggle("hidden"));playbackControls.animate([{opacity:1,transform:"scale(1)"},{opacity:0,transform:"scale(1.3)"}],{duration:1e3})},UpdateProgress:function(){const t=new Date(Math.round(video.currentTime)*1e3).toISOString().substr(11,8),n={minutes:t.substr(3,2),seconds:t.substr(6,2)};timeElapsed.innerText=`${n.minutes}:${n.seconds}`;timeElapsed.setAttribute("datetime",`${n.minutes}m ${n.seconds}s`);seek.value=Math.round(video.currentTime);progressBar.value=Math.round(video.currentTime);video.duration-video.currentTime<=6&&nextEpisodeStart()},updateSeekTooltip:function(n){const t=Math.round(n.offsetX/n.target.clientWidth*parseInt(n.target.getAttribute("max"),10));if(!isNaN(t)){seek.setAttribute("data-seek",t);const i=new Date(t*1e3).toISOString().substr(11,8),r={minutes:i.substr(3,2),seconds:i.substr(6,2)};seekTooltip.textContent=`${r.minutes}:${r.seconds}`;const u=video.getBoundingClientRect();seekTooltip.style.left=`${n.pageX-u.left}px`}},UpdateVolume:function(){video.volume=volume.value;volumeIcons.forEach(n=>{n.classList.add("hidden")});volumeButton.setAttribute("data-title","Mute (M)");video.muted||video.volume===0?(volumeMute.classList.remove("hidden"),volumeButton.setAttribute("data-title","Unmute (M)")):video.volume>0&&video.volume<=.3?volumeLow.classList.remove("hidden"):video.volume>.3&&video.volume<=.6?volumeMiddle.classList.remove("hidden"):volumeHigh.classList.remove("hidden")},ToggleMute:function(){video.muted=!video.muted;video.muted?(volume.setAttribute("data-volume",volume.value),volume.dataset.volume=volume.value,volume.value=0):volume.value=volume.dataset.volume;VideoPlayer.UpdateVolume();volume.blur()},TogglePip:async function(){try{video!==document.pictureInPictureElement?(pipButton.disabled=!0,await video.requestPictureInPicture()):await document.exitPictureInPicture()}catch(n){console.error(n)}finally{pipButton.disabled=!1}},SkipAhead:function(n){const t=n.target.dataset.seek?n.target.dataset.seek:n.target.value;video.currentTime=t;progressBar.value=t;seek.value=t;seek.blur()},ToggleFullScreen:function(){document.fullscreenElement?document.exitFullscreen():document.webkitFullscreenElement?document.webkitExitFullscreen():videoContainer.webkitRequestFullscreen?videoContainer.webkitRequestFullscreen():videoContainer.requestFullscreen();fullscreenIcons.forEach(n=>n.classList.toggle("hidden"));document.fullscreenElement||document.webkitFullscreenElement?(fullScreenButton.setAttribute("data-title","Exit full screen (f)"),video.classList.remove("h-auto")):(fullScreenButton.setAttribute("data-title","Full screen (f)"),video.classList.add("h-auto"))},ScroolToVideo:function(){video&&video.scrollIntoView()}};