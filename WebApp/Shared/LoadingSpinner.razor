@inject SpinnerService spinnerService;


<style>
    .loader {
        position: absolute;
        left: calc(50% - 110px);
        top: calc(50% - 143px);
    }

    #overlay {
        position: fixed; /* Sit on top of the page content */
        width: 100%; /* Full width (cover the whole page) */
        height: 100%; /* Full height (cover the whole page) */
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: rgba(0,0,0,0.5); /* Black background with opacity */
        z-index: 50; /* Specify a stack order in case you're using a different order for other elements */
        /*cursor: pointer;  Add a pointer on hover */
    }
</style>

@if (IsVisible)
{
    <div id="overlay">
        <div class="loader">
            <img src="/images/GokuSpinner.gif" alt="Loading..." />
        </div>
    </div>
}


@code
{
    private bool IsVisible { get; set; } = false;


    protected override void OnInitialized()
    {
        base.OnInitialized();

        spinnerService.OnShowSpinner += ShowSpinner;
        spinnerService.OnHideSpinner += HideSpinner;
    }

    private void ShowSpinner()
    {
        //Console.WriteLine($"Chiamato ShowSpinner: {DateTime.Now.ToString()}");
        IsVisible = true;
        StateHasChanged();
    }

    private void HideSpinner()
    {
        //Console.WriteLine($"Chiamato HideSpinner: {DateTime.Now.ToString()}");
        IsVisible = false;
        StateHasChanged();
    }


}
